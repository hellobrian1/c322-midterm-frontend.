<!DOCTYPE html>
<html lang="en">

<style>
    /* CSS for dividing the page into two boxes */
    

    .box {
        width: 95%; /* Adjust as needed */
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        border: 1px solid #ccc;
        padding: 10px;
    }

    .up,
    .down {
        height: 50%; /* Each box takes 50% of the height */
        border: 1px solid #ccc;
        margin-bottom: 10px;
        overflow: auto; /* Add scrollbars if content overflows */
    }

    /* Add any additional styles for specific elements if needed */
</style>


</style>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>take a quiz</title>
    <link rel="stylesheet" href="navbar.css">
    <link rel="stylesheet" href="general.css">
    <link rel="stylesheet" href="cards.css">
    <link rel="stylesheet" href="quiz.css">
  </head>
  <body>
    <ul class="topnav">
      <li><a  href="index.html">Home</a></li>
      <li><a href="add-question.html">Add questions</a></li>
      <li><a href="make-a-quiz.html">Create a quiz</a></li>
      <li><a class="active" href="take-a-quiz.html">Take a quiz</a></li>
      <li class="right"><a href="#about">About</a></li>
    </ul>
   
      <!-- First box -->
      <div class="container">
        <!-- First box -->
        <div class="box">
            <div class="up" id="quizContainer"></div>
            <div class="down"></div>
        </div>
        <!-- Second box -->
        <div class="box">
            <div class="up">
                <!-- Add any content for the upper part of the second box here -->
            </div>
            <div class="down">
                <!-- Add any content for the lower part of the second box here -->
                <div id="list" class="cards"></div>
            </div>
        </div>
    </div>
  
  
    
      
    </form>

    <div id="list" class="cards"></div>

    <script>
      let host = "http://localhost:8080";
      let questions = [];
      let quizzes = [];
      displayTheQuestions();
      displayTheQuizzes();

      async function getAll() {
        let response = await fetch(host + "/questions");
        let result = await response.json();
        return result;
      }
      async function getAllQuizzes() {
      let response = await fetch("http://localhost:8080/quizzes");
      let quizzes = await response.json();
      return quizzes;
    }

    // Function to display quizzes in the container
   // Function to display quizzes in the container
async function displayTheQuizzes() {
    const container = document.getElementById("quizContainer");
    const quizzes = await getAllQuizzes();

    // Clear container before adding quizzes
    container.innerHTML = "";

    quizzes.forEach(quiz => {
        const quizCard = document.createElement("div");
        quizCard.classList.add("quiz-card"); // Adding quiz-card class here
        quizCard.innerHTML = `
            <h3>${quiz.title}</h3>
            <p>${quiz.questionIds}</p>
            <a href="#" onclick="startQuiz(${quiz.id}); return false;">Start Quiz</a>
                `;
        container.appendChild(quizCard);
    });
}

    // Function to display questions in the "down" box
    function displayQuestions(questions) {
        const downBox = document.querySelector('.down');
        downBox.innerHTML = ''; // Clear previous content
        
        questions.forEach(question => {
            const questionDiv = document.createElement('div');
            questionDiv.classList.add('question');
            questionDiv.innerHTML = `
                <h4>${question.title}</h4>
                <p>${question.content}</p>
                <!-- Add more details as needed -->
            `;
            downBox.appendChild(questionDiv);
        });
    }


        // Display quizzes when the page loads
        window.onload = displayQuizzes;


    // Display quizzes when the page loads
    window.onload = displayTheQuizzes;
      async function displayTheQuestions() {

        async function displayTheQuizzes() {
          if(quizzes.length == 0) {
            quizzes = await getAllQuizzes();
          }
        }

        let list = document.getElementById("list");
        list.innerHTML = "";

        for (let question of questions) {
          let div = document.createElement("div");
          div.className = "card";
          let innerHtml = ';'
          div.innerHTML = innerHtml;
          list.appendChild(div);
        }
      }
      async function startQuiz(quizId) {
        try {
            const quiz = await getQuizById(quizId);
            const questions = await getQuestionsForQuiz(quiz);

            // Display questions in the "down" box
            displayQuestions(questions);
        } catch (error) {
            console.error("Error starting quiz:", error.message);
        }
    }
    </script>
  </body>
</html>
