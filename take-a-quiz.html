<!DOCTYPE html>
<html lang="en">

<style>
    /* CSS for dividing the page into two boxes */
    

    .box {
        width: 95%; /* Adjust as needed */
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        border: 1px solid #ccc;
        padding: 10px;
    }

    .up,
    .down {
        height: 50%; /* Each box takes 50% of the height */
        border: 1px solid #ccc;
        margin-bottom: 10px;
        overflow: auto; /* Add scrollbars if content overflows */
    }

    /* Add any additional styles for specific elements if needed */
    
</style>


</style>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>take a quiz</title>
    <link rel="stylesheet" href="navbar.css">
    <link rel="stylesheet" href="general.css">
    <link rel="stylesheet" href="cards.css">
    <link rel="stylesheet" href="quiz.css">
  </head>
  <body>
    <ul class="topnav">
      <li><a  href="index.html">Home</a></li>
      <li><a href="add-question.html">Add questions</a></li>
      <li><a href="make-a-quiz.html">Create a quiz</a></li>
      <li><a class="active" href="take-a-quiz.html">Take a quiz</a></li>
      <li class="right"><a href="#about">About</a></li>
    </ul>
   
      <!-- First box -->
      <div class="container">
        <!-- First box -->
        <div class="box">
            <div class="up" id="quizContainer"></div>
            <div class="down" id="questionContainer"></div>
        </div>
        <!-- Second box -->
        <div class="box">
            <div class="up">
                <!-- Add any content for the upper part of the second box here -->
            </div>
            <div class="down">
                <!-- Navigation buttons for questions -->
                <button onclick="previousQuestion()">Previous</button>
                <div id="list" class="cards"></div>
                <button onclick="nextQuestion()">Next</button>
            </div>
        </div>
    </div>
  
  
    
      
    </form>

    

    <script>
      let host = "http://localhost:8080";
      let questions = [];
      let quizzes = [];
      displayTheQuestions();
      displayTheQuizzes();

      async function getAll() {
        let response = await fetch(host + "/questions");
        let result = await response.json();
        return result;
      }
      async function getQuizById(quizId) {
            let response = await fetch(`${host}/quizzes/${quizId}`);
            let quiz = await response.json();
            return quiz;
        }
      async function getAllQuizzes() {
      let response = await fetch(host +"/quizzes");
      let quizzes = await response.json();
      return quizzes;
    }

    // Function to display quizzes in the container
   // Function to display quizzes in the container
async function displayTheQuizzes() {
    const container = document.getElementById("quizContainer");
    const quizzes = await getAllQuizzes();

    // Clear container before adding quizzes
    container.innerHTML = "";

    quizzes.forEach(quiz => {
        const quizCard = document.createElement("div");
        quizCard.classList.add("quiz-card"); // Adding quiz-card class here
        quizCard.innerHTML = `
            <h3>${quiz.title}</h3>
            <p>${quiz.questionIds}</p>
            <button onclick="startQuiz(${quiz.id});">Start Quiz</button>
                `;
        container.appendChild(quizCard);
    });
}

async function displayQuestionById(questionId) {
            let question = questions.find(q => q.id === questionId);
            if (question) {
                let questionContainer = document.getElementById("questionContainer");
                questionContainer.innerHTML = `
                    <div class="card">
                        <img src="${host}/questions/${question.id}/image" alt="question" style="width:100%">
                        <div class="container">
                            <h4><b>${question.id}</b></h4> 
                            <p>${question.description}</p>
                            <form>
                                <input type="radio" id="optionA" name="answer" value="A">
                                <label for="optionA">${question.choices[0]}</label><br>
                                <input type="radio" id="optionB" name="answer" value="B">
                                <label for="optionB">${question.choices[1]}</label><br>
                                <input type="radio" id="optionC" name="answer" value="C">
                                <label for="optionC">${question.choices[2]}</label><br>       
                            </form> 
                        </div>
                    </div>
                `;
            }
        }


        // Display quizzes when the page loads
        window.onload = displayQuizzes;


    // Display quizzes when the page loads
    window.onload = displayTheQuizzes;
      async function displayTheQuestions() {

        async function displayTheQuizzes() {
          if(quizzes.length == 0) {
            quizzes = await getAllQuizzes();
          }
        }

        let list = document.getElementById("list");
        list.innerHTML = "";

        for (let question of questions) {
          let div = document.createElement("div");
          div.className = "card";
          let innerHtml = ';'
          div.innerHTML = innerHtml;
          list.appendChild(div);
        }
      }
      async function startQuiz(quizId) {
    // Fetch quiz details including question IDs
    let quiz = await getQuizById(quizId);
    let questionIds = quiz.questionIds;

    // Fetch details of each question
    questions = await Promise.all(questionIds.map(async questionId => {
        let question = await getQuestionById(questionId);
        return question;
    }));

    // Display the first question
    displayQuestionById(questions[0].id);
}
async function getQuestionById(questionId) {
    let response = await fetch(`${host}/questions/${questionId}`);
    let question = await response.json();
    return question;
}



        let currentQuestionIndex = 0;



        // Display quizzes when the page loads
        window.onload = displayTheQuizzes;
      
    </script>
  </body>
</html>

